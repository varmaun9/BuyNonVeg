"use_strict";var Shira;(function(e,t){(function(e){e.Watcher=function(n,r){this.element=n;this.options=t.extend({},e.Watcher.defaults,r)};e.Watcher.defaults={fixClass:"scroll-fix",fixTop:0,fixOffset:0,unfixOffset:0,onUpdateFixed:null,syncSize:true,syncPosition:true,style:true};e.Watcher.prototype={element:null,substitute:null,options:null,fixed:false,attached:false,getElementX:function(e){var t=0;do t+=e.offsetLeft;while(e=e.offsetParent);return t},getElementY:function(e){var t=0;do t+=e.offsetTop;while(e=e.offsetParent);return t},fix:function(){this.substitute=t(this.element.cloneNode(false)).css("visibility","hidden").height(t(this.element).height()).insertAfter(this.element)[0];if(this.options.style){t(this.element).css("position","fixed").css("top",this.options.fixTop+"px")}t(this.element).addClass(this.options.fixClass)},updateFixed:function(){if(this.options.syncSize){t(this.element).width(t(this.substitute).width())}if(this.options.syncPosition){var e=t(window).scrollLeft();var n=this.getElementX(this.substitute);t(this.element).css("left",n-e+"px")}if(null!==this.options.onUpdateFixed){this.options.onUpdateFixed(this)}},unfix:function(){t(this.substitute).remove();this.substitute=null;var e={};if(this.options.syncPosition){e.left=""}if(this.options.syncSize){e.width=""}if(this.options.style){e.position="";e.top=""}t(this.element).css(e).removeClass(this.options.fixClass)},attach:function(){if(this.attached){throw new Error("Already attached")}var e=this;this.updateEventHandler=function(){e.pulse()};t(window).scroll(this.updateEventHandler).resize(this.updateEventHandler);this.attached=true;this.pulse()},detach:function(){if(!this.attached){throw new Error("Not attached")}t(window).unbind("scroll",this.updateEventHandler).unbind("resize",this.updateEventHandler);this.attached=false},pulse:function(){var e=t(window).scrollTop();if(this.fixed){if(e<=this.getElementY(this.substitute)+this.options.unfixOffset){this.unfix();this.fixed=false}else{this.updateFixed()}}else{if(e>=this.getElementY(this.element)+this.options.fixOffset){this.fix();this.fixed=true;this.updateFixed()}}}};t.fn.scrollFix=function(t){var n=this[0];if(n){var r=new e.Watcher(n,t);r.attach();return r}return false}})(e.ScrollFix||(e.ScrollFix={}))})(Shira||(Shira={}),jQuery)